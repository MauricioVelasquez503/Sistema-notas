-- MySQL Administrator dump 1.4
--
-- ------------------------------------------------------
-- Server version	5.6.12-log


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;


--
-- Create schema notas_itr
--

CREATE DATABASE IF NOT EXISTS notas_itr;
USE notas_itr;

--
-- Definition of table `actividades`
--

DROP TABLE IF EXISTS `actividades`;
CREATE TABLE `actividades` (
  `ID_GRADO` int(11) NOT NULL,
  `ID_SECCIONES` varchar(4) NOT NULL,
  `ID_MATERIA` int(11) NOT NULL,
  `ID_ACTIVIDAD` varchar(10) NOT NULL,
  `ID_PROFESOR` int(11) NOT NULL,
  `ID_ALUMNO` varchar(10) NOT NULL,
  `IDTIPO_ACTIVIDAD` int(11) NOT NULL,
  `STR_NOMBRE` varchar(100) DEFAULT NULL,
  `PORCENTAJE` decimal(5,2) DEFAULT NULL,
  `FECHA_ENTREGA` date DEFAULT NULL,
  PRIMARY KEY (`ID_GRADO`,`ID_SECCIONES`,`ID_MATERIA`,`ID_ACTIVIDAD`,`ID_PROFESOR`,`ID_ALUMNO`),
  UNIQUE KEY `ACTIVIDADES_IDX01` (`ID_GRADO`,`ID_SECCIONES`,`ID_MATERIA`,`ID_ACTIVIDAD`,`ID_PROFESOR`,`ID_ALUMNO`),
  KEY `ACTIVIDADES_IDX02` (`IDTIPO_ACTIVIDAD`),
  KEY `ACTIVIDADES_IDX03` (`ID_PROFESOR`),
  KEY `ACTIVIDADES_IDX04` (`ID_MATERIA`),
  KEY `ACTIVIDADES_R01` (`ID_GRADO`,`ID_SECCIONES`,`ID_ALUMNO`),
  KEY `ACTIVIDADES_R02` (`ID_MATERIA`,`ID_PROFESOR`),
  CONSTRAINT `ACTIVIDADES_R02` FOREIGN KEY (`ID_MATERIA`, `ID_PROFESOR`) REFERENCES `maestros_materia` (`ID_MATERIA`, `ID_PROFESOR`),
  CONSTRAINT `ACTIVIDADES_R01` FOREIGN KEY (`ID_GRADO`, `ID_SECCIONES`, `ID_ALUMNO`) REFERENCES `alumnos_seccion` (`ID_GRADO`, `ID_SECCIONES`, `ID_ALUMNO`),
  CONSTRAINT `ACTIVIDADES_R03` FOREIGN KEY (`IDTIPO_ACTIVIDAD`) REFERENCES `tipo_actividad` (`IDTIPO_ACTIVIDAD`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `actividades`
--

/*!40000 ALTER TABLE `actividades` DISABLE KEYS */;
/*!40000 ALTER TABLE `actividades` ENABLE KEYS */;


--
-- Definition of table `alumnos_seccion`
--

DROP TABLE IF EXISTS `alumnos_seccion`;
CREATE TABLE `alumnos_seccion` (
  `ID_GRADO` int(11) NOT NULL,
  `ID_SECCIONES` varchar(4) NOT NULL,
  `ID_ALUMNO` varchar(10) NOT NULL,
  `STR_NOMBRE_ALUMNO` varchar(60) DEFAULT NULL,
  `STR_APELLIDO_ALUMNO` varchar(60) DEFAULT NULL,
  `STRNIE` varchar(25) DEFAULT NULL,
  `INTACTIVO` decimal(1,0) NOT NULL,
  `FECHA_REGISTRO` date NOT NULL,
  PRIMARY KEY (`ID_GRADO`,`ID_SECCIONES`,`ID_ALUMNO`),
  UNIQUE KEY `ALUMNOS_SECCION_01` (`ID_GRADO`,`ID_SECCIONES`,`ID_ALUMNO`),
  UNIQUE KEY `ALUMNOS_SECCION_IDX02` (`ID_ALUMNO`),
  KEY `ALUMNOS_SECCION_IDX03` (`STRNIE`),
  KEY `ALUMNOS_SECCION_IDX04` (`STR_APELLIDO_ALUMNO`),
  CONSTRAINT `ALUMNOS_SECCION_R01` FOREIGN KEY (`ID_GRADO`, `ID_SECCIONES`) REFERENCES `secciones` (`ID_GRADO`, `ID_SECCIONES`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `alumnos_seccion`
--

/*!40000 ALTER TABLE `alumnos_seccion` DISABLE KEYS */;
/*!40000 ALTER TABLE `alumnos_seccion` ENABLE KEYS */;


--
-- Definition of table `grados`
--

DROP TABLE IF EXISTS `grados`;
CREATE TABLE `grados` (
  `ID_GRADO` int(11) NOT NULL COMMENT 'Código de Grado',
  `GRADO` varchar(60) NOT NULL COMMENT 'Descripción del Grado.',
  PRIMARY KEY (`ID_GRADO`),
  UNIQUE KEY `IDX_GRADO` (`ID_GRADO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `grados`
--

/*!40000 ALTER TABLE `grados` DISABLE KEYS */;
/*!40000 ALTER TABLE `grados` ENABLE KEYS */;


--
-- Definition of table `maestros`
--

DROP TABLE IF EXISTS `maestros`;
CREATE TABLE `maestros` (
  `ID_PROFESOR` int(11) NOT NULL,
  `STR_CODIGO__PROFESOR` varchar(25) DEFAULT NULL,
  `STR_NOMBRE_PROFESOR` varchar(60) DEFAULT NULL,
  `STR_APELLIDO_PROFESOR` varchar(60) DEFAULT NULL,
  `FECHA_REGISTRO` date DEFAULT NULL,
  PRIMARY KEY (`ID_PROFESOR`),
  UNIQUE KEY `MAESTROS_IDX01` (`ID_PROFESOR`),
  KEY `MAESTROS_IDX02` (`STR_CODIGO__PROFESOR`),
  KEY `MAESTROS_IDX03` (`STR_APELLIDO_PROFESOR`,`STR_NOMBRE_PROFESOR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `maestros`
--

/*!40000 ALTER TABLE `maestros` DISABLE KEYS */;
/*!40000 ALTER TABLE `maestros` ENABLE KEYS */;


--
-- Definition of table `maestros_materia`
--

DROP TABLE IF EXISTS `maestros_materia`;
CREATE TABLE `maestros_materia` (
  `ID_MATERIA` int(11) NOT NULL,
  `ID_PROFESOR` int(11) NOT NULL,
  PRIMARY KEY (`ID_MATERIA`,`ID_PROFESOR`),
  UNIQUE KEY `MAESTROS_MATERIA_IDX01` (`ID_MATERIA`,`ID_PROFESOR`),
  KEY `MAESTROS_MATERIA_IDX02` (`ID_PROFESOR`),
  CONSTRAINT `MAESTROS_MATERIA_R01` FOREIGN KEY (`ID_MATERIA`) REFERENCES `materias` (`ID_MATERIA`),
  CONSTRAINT `MAESTROS_MATERIA_R02` FOREIGN KEY (`ID_PROFESOR`) REFERENCES `maestros` (`ID_PROFESOR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `maestros_materia`
--

/*!40000 ALTER TABLE `maestros_materia` DISABLE KEYS */;
/*!40000 ALTER TABLE `maestros_materia` ENABLE KEYS */;


--
-- Definition of table `maestros_seccion`
--

DROP TABLE IF EXISTS `maestros_seccion`;
CREATE TABLE `maestros_seccion` (
  `ID_GRADO` int(11) NOT NULL,
  `ID_SECCIONES` varchar(4) NOT NULL,
  `ID_PROFESOR` int(11) NOT NULL,
  PRIMARY KEY (`ID_GRADO`,`ID_SECCIONES`,`ID_PROFESOR`),
  UNIQUE KEY `MAESTROS_SECCION_IDX01` (`ID_GRADO`,`ID_SECCIONES`,`ID_PROFESOR`),
  KEY `MAESTROS_SECCION_IDX2` (`ID_PROFESOR`),
  CONSTRAINT `MAESTROS_SECCION_R02` FOREIGN KEY (`ID_GRADO`, `ID_SECCIONES`) REFERENCES `secciones` (`ID_GRADO`, `ID_SECCIONES`),
  CONSTRAINT `MAESTROS_SECCION_R01` FOREIGN KEY (`ID_PROFESOR`) REFERENCES `maestros` (`ID_PROFESOR`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='MAESTROS QUE DAN CLASES EN UNA SECCION';

--
-- Dumping data for table `maestros_seccion`
--

/*!40000 ALTER TABLE `maestros_seccion` DISABLE KEYS */;
/*!40000 ALTER TABLE `maestros_seccion` ENABLE KEYS */;


--
-- Definition of table `materias`
--

DROP TABLE IF EXISTS `materias`;
CREATE TABLE `materias` (
  `ID_MATERIA` int(11) NOT NULL,
  `STR_CODIGO` varchar(15) NOT NULL COMMENT 'cÓDIGO DE LA MATERIA',
  `STR_NOMBRE` varchar(60) NOT NULL COMMENT 'NOMBRE DE LA MATERIA',
  `FECHA_REGISTRO` date DEFAULT NULL,
  PRIMARY KEY (`ID_MATERIA`),
  UNIQUE KEY `MATERIAS_IDX02` (`STR_CODIGO`),
  KEY `MATERIAS_IDX01` (`ID_MATERIA`),
  KEY `MATERIAS_IDX03` (`STR_NOMBRE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `materias`
--

/*!40000 ALTER TABLE `materias` DISABLE KEYS */;
INSERT INTO `materias` (`ID_MATERIA`,`STR_CODIGO`,`STR_NOMBRE`,`FECHA_REGISTRO`) VALUES 
 (1,'MAT001','MATEMATICAS','2013-10-23'),
 (2,'SOC001','ESTUDIOS SOCIALES','2013-10-23');
/*!40000 ALTER TABLE `materias` ENABLE KEYS */;


--
-- Definition of table `materias_grados`
--

DROP TABLE IF EXISTS `materias_grados`;
CREATE TABLE `materias_grados` (
  `ID_GRADO` int(11) NOT NULL,
  `ID_MATERIA` int(11) NOT NULL,
  PRIMARY KEY (`ID_GRADO`,`ID_MATERIA`),
  UNIQUE KEY `MATERIAS_GRADOS_IDX01` (`ID_GRADO`,`ID_MATERIA`),
  KEY `MATERIAS_GRADOS_IDX02` (`ID_MATERIA`),
  CONSTRAINT `MATERIAS_GRADOS_R02` FOREIGN KEY (`ID_GRADO`) REFERENCES `grados` (`ID_GRADO`),
  CONSTRAINT `MATERIAS_GRADOS_R01` FOREIGN KEY (`ID_MATERIA`) REFERENCES `materias` (`ID_MATERIA`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `materias_grados`
--

/*!40000 ALTER TABLE `materias_grados` DISABLE KEYS */;
/*!40000 ALTER TABLE `materias_grados` ENABLE KEYS */;


--
-- Definition of table `secciones`
--

DROP TABLE IF EXISTS `secciones`;
CREATE TABLE `secciones` (
  `ID_GRADO` int(11) NOT NULL,
  `ID_SECCIONES` varchar(4) NOT NULL COMMENT 'Código de la sección.',
  `STR_SECCIONES` varchar(60) NOT NULL,
  PRIMARY KEY (`ID_GRADO`,`ID_SECCIONES`),
  UNIQUE KEY `SECCIONES_IDX` (`ID_GRADO`,`ID_SECCIONES`),
  CONSTRAINT `SECCIONES_R01` FOREIGN KEY (`ID_GRADO`) REFERENCES `grados` (`ID_GRADO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='Tabla que guarda las secciones del grado.';

--
-- Dumping data for table `secciones`
--

/*!40000 ALTER TABLE `secciones` DISABLE KEYS */;
/*!40000 ALTER TABLE `secciones` ENABLE KEYS */;


--
-- Definition of table `tipo_actividad`
--

DROP TABLE IF EXISTS `tipo_actividad`;
CREATE TABLE `tipo_actividad` (
  `IDTIPO_ACTIVIDAD` int(11) NOT NULL,
  `STR_NOMBRE_ACTIVIDAD` varchar(60) NOT NULL,
  `ES_EXAMEN` decimal(1,0) NOT NULL DEFAULT '0',
  `ES_TAREA` decimal(1,0) NOT NULL DEFAULT '0',
  PRIMARY KEY (`IDTIPO_ACTIVIDAD`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Dumping data for table `tipo_actividad`
--

/*!40000 ALTER TABLE `tipo_actividad` DISABLE KEYS */;
INSERT INTO `tipo_actividad` (`IDTIPO_ACTIVIDAD`,`STR_NOMBRE_ACTIVIDAD`,`ES_EXAMEN`,`ES_TAREA`) VALUES 
 (1,'TAREA','0','1'),
 (2,'EXAMEN CORTO','0','1'),
 (3,'EXAMEN','1','0');
/*!40000 ALTER TABLE `tipo_actividad` ENABLE KEYS */;




/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
